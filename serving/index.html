<html>
    <head>
        <title>Drone POV</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
                margin: 0;
            }

            h1 {
                margin-bottom: 20px;
            }

            #videoFrame {
                border: 5px solid black;
                width: 80vw;
                height: 60vh;
                display: flex;
                align-items: center;
                justify-content: center;
                overflow: hidden;
                margin-bottom: 20px;
            }

            #videoFeed {
                width: 100%;
                height: 100%;
                object-fit: contain; 
            }

            #input_combo {
                align-items: center;
                width: 80vw;
                display: flex;
            }

            #textInput {
                width: 80vw;
                font-size: 1.5rem;
                padding: 10px;
                margin-bottom: 10px;
                margin-right: 10px;
            }

            #submitButton {
                font-size: 1.5rem;
                padding: 10px 15px;
                margin-bottom: 10px;
            }
        </style>
        <script>
            function clearInput() {
                document.getElementById('textInput').value = '';
            }
    
            function submitInput() {
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/submit', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                xhr.onload = function() {
                    // if (this.status == 200) {
                    //     alert(this.responseText);
                    // }
                };

                var userInput = document.getElementById('textInput').value;
                xhr.send('user_input=' + encodeURIComponent(userInput));
            }

            function handleKeyPress(event) {
                // Check if the pressed key is Enter
                if (event.keyCode === 13 || event.which === 13) {
                    // Prevent default behavior (like form submission)
                    event.preventDefault();
                    
                    // Call the functions
                    submitInput();
                    clearInput();
                }
            }
        </script>
    </head>
    <body>
        <h1>Drone POV</h1>
        <div id="videoFrame">
            <img id="videoFeed" src="/video_feed" />
        </div>
        <form id="input_combo" method="post" action="/submit" autocomplete="off">
            <!-- <input type="text" id="textInput" name="user_input" placeholder="Enter text here..." onkeydown="handleKeyPress(event)"> -->
            <input type="text" id="textInput" name="user_input" placeholder="Enter text here..." list="suggestions" autocomplete="off" onkeydown="handleKeyPress(event)">
            <datalist id="suggestions">
                <option value="Could you try to find something for me to eat?">
                <option value="Go to the bottle on the left.">
                <option value="[Q] How many people are in sight?">
                <!-- Add more options as needed -->
            </datalist>
            <button id="submitButton" type="button" onclick="submitInput(); clearInput();">Submit</button>
        </form>
    </body>
</html>